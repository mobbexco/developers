<!DOCTYPE html>
<!--
	Forty by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>Mobbex</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<!--[if lte IE 8]><script src="http://localhost:4000/assets/js/ie/html5shiv.js"></script><![endif]-->
	<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css" />
	<!--[if lte IE 9]><link rel="stylesheet" href="http://localhost:4000/assets/css/ie9.css" /><![endif]-->
	<!--[if lte IE 8]><link rel="stylesheet" href="http://localhost:4000/assets/css/ie8.css" /><![endif]-->
</head>


<body>

    <!-- Wrapper -->
<div id="wrapper">

<!-- Header -->
<header id="header">
	<a href="http://localhost:4000/" class="logo"><strong>Mobbex</strong> <span>Developer Site</span></a>
	<nav>
		<a href="#menu">Menu</a>
	</nav>
</header>

<!-- Menu -->
<nav id="menu">
	<ul class="links">
        
		    
		        <li><a href="http://localhost:4000/">Inicio</a></li>
	    	
		
		    
		
		    
		
		
		    
		
		    
		        <li><a href="http://localhost:4000/statuses.html">Estados</a></li>
		    
		
		    
		        <li><a href="http://localhost:4000/testcards.html">Tarjetas de Prueba</a></li>
		    
		
	</ul>
	<ul class="actions vertical">
		<!--<li><a href="#" class="button special fit">Get Started</a></li>-->
		<li><a href="https://mobbex.com/console" target="_blank" class="button fit">Ingresar</a></li>
	</ul>
</nav> 
    
    
<!-- Main -->
<div id="main" class="alt">

<!-- One -->
<section id="one">
	<div class="inner">
		<header class="major">
			<h1>WebCheckout</h1>
		</header>
		
		<p><p>Para crear un checkout es necesario poseer un API Key y un Access Token. Para obtenerlos se deben seguir los siguientes pasos</p>

<p>1) Ingresar a https://mobbex.com/console<br />
2) Dirigirse desde el menú superior a “Desarrollador”<br />
3) Crear una nueva aplicación o utilizar una existente<br />
4) Obtener el acceso a una Entidad mediante la opción “Solicitar Acceso” o utilizar un acceso ya concedido mostrado en el listado de “Entidades Autorizadas”<br /></p>

<p>Habiendo obtenido ambos keys se puede proceder a generar la solicitud para crear un Checkout. Algunos ejemplos a continuación.</p>

<h4 id="cabeceras-headers">Cabeceras (Headers)</h4>
<ul>
  <li><strong><em>x-api-key</em></strong>: Clave API de su aplicación</li>
  <li><strong><em>x-access-token</em></strong>: Token de Acceso a la entidad para la cual desea realizar la operación.</li>
</ul>

<h4 id="parametros-post-params">Parametros (POST Params)</h4>

<p><strong>Requeridos</strong></p>
<ul>
  <li><strong><em>total</em></strong> (Número: XXX.xx) Monto de la operación. Formato XXX.xx donde el <strong><em>PUNTO</em></strong> es el separador decimal.</li>
  <li><strong><em>description</em></strong> (Texto hasta 255 caracteres) Descripción de la operación que será mostrada en el Checkout.</li>
  <li><strong><em>return_url</em></strong> (FQDN) URL para retornar una vez finalizada la operación o si el usuario desea cancelar la misma.</li>
  <li><strong><em>reference</em></strong> (Texto) Es una referencia que no será mostrada pero que le será útil para reconocer la operación en su sistema.</li>
</ul>

<p><strong>Opcionales</strong></p>
<ul>
  <li><strong><em>webhook</em></strong> (FQDN compatible con POST) URL que será invocada por Mobbex al finalizar la operación mediante <strong>POST</strong> y que recibirá todos los detalles sobre la operación procesada. El Webhook será invocado antes de realizarse la redirección. Tenga en cuenta que la URL utilizada debe ser capaz de recibir una llamada de Tipo POST de lo contrario Mobbex no será capaz de informarle sobre la misma.</li>
  <li><strong><em>redirect</em></strong> (Boolean: true/false) permite la redirección automática al checkout al terminar la ejecución del POST sin intervención del usuario. (Por defecto es falso y siempre retorna la URL )</li>
</ul>

<p><strong>CURL</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code>curl --request POST \
  --url https://mobbex.com/p/checkout/create \
  --header 'cache-control: no-cache' \
  --header 'content-type: multipart/form-data; \
  --header 'x-api-key: zJ8LFTBX6Ba8D611e9io13fDZAwj0QmKO1Hn1yIj' \
  --header 'x-access-token: d31f0721-2f85-44e7-bcc6-15e19d1a53cc' \
  --form total=100 \
  --form 'reference=#MyImportantID' \
  --form 'description=Some Description' \
  --form return_url=https://mobbex.com/finished
</code></pre>
</div>

<p><strong>Javascript</strong></p>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
<span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"total"</span><span class="p">,</span> <span class="s2">"100"</span><span class="p">);</span>
<span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"reference"</span><span class="p">,</span> <span class="s2">"#MyImportantID"</span><span class="p">);</span>
<span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"description"</span><span class="p">,</span> <span class="s2">"Some Description"</span><span class="p">);</span>
<span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"return_url"</span><span class="p">,</span> <span class="s2">"https://mobbex.com/finished"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"readystatechange"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"POST"</span><span class="p">,</span> <span class="s2">"https://mobbex.com/p/checkout/create"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"x-api-key"</span><span class="p">,</span> <span class="s2">"zJ8LFTBX6Ba8D611e9io13fDZAwj0QmKO1Hn1yIj"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"x-access-token"</span><span class="p">,</span> <span class="s2">"d31f0721-2f85-44e7-bcc6-15e19d1a53cc"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"cache-control"</span><span class="p">,</span> <span class="s2">"no-cache"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre>
</div>

<p><strong>PHP</strong></p>
<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>  
<span class="nv">$request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HttpRequest</span><span class="p">();</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setUrl</span><span class="p">(</span><span class="s1">'https://mobbex.com/p/checkout/create'</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setMethod</span><span class="p">(</span><span class="nx">HTTP_METH_POST</span><span class="p">);</span>  
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setHeaders</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'postman-token'</span> <span class="o">=&gt;</span> <span class="s1">'4533ef25-f802-5fcc-cc03-8cc45e14d3c6'</span><span class="p">,</span>
  <span class="s1">'cache-control'</span> <span class="o">=&gt;</span> <span class="s1">'no-cache'</span><span class="p">,</span>
  <span class="s1">'content-type'</span> <span class="o">=&gt;</span> <span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'x-access-token'</span> <span class="o">=&gt;</span> <span class="s1">'d31f0721-2f85-44e7-bcc6-15e19d1a53cc'</span><span class="p">,</span>
  <span class="s1">'x-api-key'</span> <span class="o">=&gt;</span> <span class="s1">'zJ8LFTBX6Ba8D611e9io13fDZAwj0QmKO1Hn1yIj'</span>
<span class="p">));</span>  
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setContentType</span><span class="p">(</span><span class="s1">'application/x-www-form-urlencoded'</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setPostFields</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'total'</span> <span class="o">=&gt;</span> <span class="s1">'100'</span><span class="p">,</span>
  <span class="s1">'reference'</span> <span class="o">=&gt;</span> <span class="s1">'#MyImportantID'</span><span class="p">,</span>
  <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Some Description'</span><span class="p">,</span>
  <span class="s1">'return_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mobbex.com/finished'</span>
<span class="p">));</span>  
<span class="k">try</span> <span class="p">{</span>
  <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>    
  <span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">HttpException</span> <span class="nv">$ex</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="nv">$ex</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="respuesta">Respuesta:</h4>

<p>Tenga en cuenta que las respuestas del servicio siempre serán en formato JSON. El servicio sólo contestará si <strong>redirect</strong> no fue utilizado o si el mismo se colocó en “false”</p>

<p><strong>JSON</strong></p>
<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"result"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rytPr_gSe"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mobbex.com/p/checkout/view/rytPr_gSe"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some Description"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Como desarrollador deberá redireccionar el sitio web a la url proporcionada en la respuesta de nuestro servicio.</p>

<h4 id="transacción-finalizadacancelada">Transacción finalizada/cancelada</h4>

<p>Si se define el parámetro <code class="highlighter-rouge">return_url</code> el servicio redireccionará a la URL provista mediante HTTP Get, a esta url se le agregará el Estado de la misma mediante el parámetro <code class="highlighter-rouge">status</code></p>

<p>Ejemplo:
<code class="highlighter-rouge">https://mobbex.com/thank_you?status=200</code></p>

<p>Referencia de los Estados posibles: <a href="/statuses">Estados</a></p>
</p>
	</div>
</section>

</div>

    <!-- Contact -->
<!--<section id="contact">
	<div class="inner">
		<section>
			<form action="https://formspree.io/info@mobbex.com" method="POST">
				<div class="field half first">
					<label for="name">Name</label>
					<input type="text" name="name" id="name" />
				</div>
				<div class="field half">
					<label for="email">Email</label>
					<input type="text" name="_replyto" id="email" />
				</div>
				<div class="field">
					<label for="message">Message</label>
					<textarea name="message" id="message" rows="6"></textarea>
				</div>
				<ul class="actions">
					<li><input type="submit" value="Send Message" class="special" /></li>
					<li><input type="reset" value="Clear" /></li>
				</ul>
			</form>
		</section>
		<section class="split">
			<section>
				<div class="contact-method">
					<span class="icon alt fa-envelope"></span>
					<h3>Email</h3>
					<a href="#">info@mobbex.com</a>
				</div>
			</section>
			<section>
				<div class="contact-method">
					<span class="icon alt fa-phone"></span>
					<h3>Phone</h3>
					<span></span>
				</div>
			</section>
			<section>
				<div class="contact-method">
					<span class="icon alt fa-home"></span>
					<h3>Address</h3>
					<span><br />
					,  <br />
					</span>
				</div>
			</section>
		</section>
	</div>
</section>-->

<!-- Footer -->
	<footer id="footer">
		<div class="inner">
			<ul class="icons">
				
				<li><a href="https://twitter.com/mobbex" class="icon alt fa-twitter" target="_blank"><span class="label">Twitter</span></a></li>
				
				
				<li><a href="https://facebook.com/mobbex" class="icon alt fa-facebook" target="_blank"><span class="label">Facebook</span></a></li>
				
				
				<li><a href="https://github.com/mobbexco" class="icon alt fa-github" target="_blank"><span class="label">GitHub</span></a></li>
				
			</ul>
		</div>
	</footer>

</div>

<!-- Scripts -->
	<script src="http://localhost:4000/assets/js/jquery.min.js"></script>
	<script src="http://localhost:4000/assets/js/jquery.scrolly.min.js"></script>
	<script src="http://localhost:4000/assets/js/jquery.scrollex.min.js"></script>
	<script src="http://localhost:4000/assets/js/skel.min.js"></script>
	<script src="http://localhost:4000/assets/js/util.js"></script>
	<!--[if lte IE 8]><script src="http://localhost:4000/assets/js/ie/respond.min.js"></script><![endif]-->
	<script src="http://localhost:4000/assets/js/main.js"></script>


</body>

</html>